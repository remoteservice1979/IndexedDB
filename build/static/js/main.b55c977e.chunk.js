(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(87)},53:function(e,t,a){},85:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(42),s=a.n(o),l=(a(53),a(11)),r=a(12),c=a(15),d=a(13),m=a(14),p=a(92),u=a(91),h=a(18),f=a(19),b=a(44),v={},y=a(4),E={data:null,status:"complete"},g={state:!1,loading:!1},N=a(7),O=a(2),C=a.n(O),k={create:{},list:[],deleting:!1},w=Object(f.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return null===t.payload?{}:t.payload;default:return e}},loadingRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"LOADING_SPINNER_START":case"LOADING_SPINNER_COMPLETE":case"LOADING_SPINNER_ERROR":return Object(y.a)({},e,{status:a.status,data:a.data});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;switch((arguments.length>1?arguments[1]:void 0).type){case"Modal/BUTTON_LOADING":return{state:!0,loading:!0};case"Modal/BUTTON_FINISH":return{state:!0,loading:!1};default:return e}},formLoader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"FORM_LOADING_START":return!0;case"FORM_LOADING_FINISH":return!1;default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CARD_NEW":case"CHANGE_QUESTION":case"CHANGE_PLACEHOLDER":case"CHANGE_TYPE":case"ADD_OPTION":case"CHANGE_OPTION":case"REMOVE_OPTION":return Object(y.a)({},e,{create:Object(y.a)({},e.create,Object(N.a)({},t.id,t.payload))});case"CARD_REMOVE":return Object(y.a)({},e,{deleting:!1});case"CARD_REQUIRED":return Object(y.a)({},e,{create:Object(y.a)({},e.create,Object(N.a)({},t.payload,Object(y.a)({},e.create[t.payload],{required:t.required})))});case"FETCH_FORMS":return Object(y.a)({},e,{list:t.payload});case"FETCH_FORM":return Object(y.a)({},e,{create:t.payload});case"CLEAR_FORM":return Object(y.a)({},e,{create:{}});case"CARD_REMOVING":var a=t.id,n=t.payload;return Object(y.a)({},e,{create:n,deleting:a});case"CHANGE_SECTION":return Object(y.a)({},e,{create:Object(y.a)({},e.create,Object(N.a)({},t.id,Object(y.a)({},e.create[t.id],{section:t.payload})))});default:return e}}}),j=[b.a,function(e){return function(t){return function(a){return a.promise?(e.dispatch({type:"LOADING_SPINNER_START",payload:{status:"start"}}),t(function(e,t){var n=Object.assign({},a,{ready:e},t);return delete n.promise,n}(!1)),a.promise.then(function(t){e.dispatch({type:"LOADING_SPINNER_COMPLETE",payload:{status:"complete"}})},function(t){var a=t;e.dispatch({type:"LOADING_SPINNER_ERROR",payload:{status:"error",data:a.response?a.response:a}}),console.log("Caught Exception!",t)})):t(a)}}}],x=f.d,_=Object(f.e)(w,{},x(f.a.apply(void 0,j))),S=a(17),I=a.n(S),R=a(22),F=a(3),T=a(90),A=a(9),D=a.n(A),B=(a(29),function(){return"id-"+Math.random().toString(36).substr(2,16)}),L=new(a(45).a)("agilworldCustomForm");L.version(1).stores({forms:"++id, &code, title, *data"});var P=L,M=function(){return function(e){e({type:"Modal/HIDE"})}},U=function(){return function(e){e({type:"Modal/BUTTON_FINISH"})}},H=a(47),G=function(e){var t=e.name,a=e.placeholder,n=e.value,o=(e.label,e.size),s=e.error,l=e.info,r=e.type,c=(e.col,e.style),d=e.id,m=e.onChange,p=e.onBlur,u=e.disabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{type:r,id:d,className:D()("form-control",{"is-invalid":s,"form-control-lg":"lg"===o,"form-control-sm":"sm"===o}),placeholder:a,name:t,value:n,onChange:m,onBlur:p,style:c,disabled:u}),l&&i.a.createElement("small",{className:"form-text text-muted",dangerouslySetInnerHTML:{__html:l}}),s&&i.a.createElement("div",{className:"invalid-feedback"},s))};G.defaultProps={placeholder:"Short Text here",type:"text",size:"md",col:{xs:12}};var z=G,q=a(6),W=function(e){function t(e){var a;Object(l.a)(this,t);var n=(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.data;return a.state={fieldType:n.type,value:n.placeholder,question:n.title,options:n.options},a.onTitleUpdate=a.onTitleUpdate.bind(Object(F.a)(Object(F.a)(a))),a.onFieldsUpdate=a.onFieldsUpdate.bind(Object(F.a)(Object(F.a)(a))),a.onPlaceholderUpdate=a.onPlaceholderUpdate.bind(Object(F.a)(Object(F.a)(a))),a.onUpdateOptions=a.onUpdateOptions.bind(Object(F.a)(Object(F.a)(a))),a.addOption=a.addOption.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onTitleUpdate",value:function(e){var t=this.props.data;t.title=e.target.value,_.dispatch({type:"CHANGE_QUESTION",payload:t,id:this.props.id})}},{key:"onPlaceholderUpdate",value:function(e){var t=this.props.data;t.placeholder=e.target.value,_.dispatch({type:"CHANGE_PLACEHOLDER",payload:t,id:this.props.id})}},{key:"onFieldsUpdate",value:function(e){if(""!=e.target.value){var t=this.props.data;t.type=e.target.value,_.dispatch({type:"CHANGE_TYPE",payload:t,id:this.props.id}),this.setState({fieldType:e.target.value})}}},{key:"addOption",value:function(e){e.preventDefault(),this.setState({options:[].concat(Object(H.a)(this.state.options),[""])});var t=this.props.data;t.options.push(""),_.dispatch({type:"ADD_OPTION",payload:t,id:this.props.id})}},{key:"onUpdateOptions",value:function(e,t){if(""!=t.target.value){var a=this.props.data,n=C.a.fill(this.state.options,t.target.value,e,e);a.options=n,_.dispatch({type:"CHANGE_OPTION",payload:a,id:this.props.id})}}},{key:"removeOption",value:function(e,t){t.preventDefault();var a=this.props.data;a.options.splice(e,1),_.dispatch({type:"REMOVE_OPTION",payload:a,id:this.props.id})}},{key:"render",value:function(){var e=this,t=(this.state.fieldType,this.props.id);this.state.value;return i.a.createElement("div",{id:t,className:"panel",style:{padding:0}},i.a.createElement("div",{className:"panel-body",style:{padding:0}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-8"},i.a.createElement("input",{type:"text",onChange:function(t){e.setState({question:t.target.value})},onBlur:this.onTitleUpdate,placeholder:"Question",value:this.state.question,style:{fontSize:"17px"},className:"form-control",name:"title",id:t+"_question"})),i.a.createElement("div",{className:"col-4"},i.a.createElement("select",{name:"fields",className:"form-control",id:"fields",onChange:this.onFieldsUpdate,style:{fontSize:"17px"},value:this.state.fieldType},i.a.createElement("option",{value:"text"},"Text"),i.a.createElement("option",{value:"textarea"},"Paragaph"),i.a.createElement("option",{value:"radio"},"Multiple Choice"),i.a.createElement("option",{value:"checkbox"},"Checkboxes"),i.a.createElement("option",{value:"dropdown"},"Dropdown"),i.a.createElement("option",{value:"image_upload"},"Image Upload"),i.a.createElement("option",{value:"date"},"Date"),i.a.createElement("option",{value:"time"},"Time")))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},("text"==this.props.data.type||"textarea"==this.props.data.type||"image_upload"==this.props.data.type)&&i.a.createElement("input",{type:"text",placeholder:"image_upload"==this.props.data.type?"Enter description":"Enter placeholder",name:t+"_placeholder",className:"form-control",value:this.state.value,onChange:function(t){e.setState({value:t.target.value})},onBlur:this.onPlaceholderUpdate,id:t+"_placeholder"}),("radio"==this.props.data.type||"checkbox"==this.props.data.type||"dropdown"==this.props.data.type)&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"text-left col-4"},!C.a.isEmpty(this.state.options)&&this.state.options.map(function(a,n){var o;return i.a.createElement("div",{key:n,className:"row"},i.a.createElement("div",{className:"col-1",style:{lineHeight:"50px"}},i.a.createElement("a",{href:"#",style:{color:"#999"},onClick:e.removeOption.bind(e,n)},i.a.createElement(q.f,{size:"1.2em"}))),i.a.createElement("div",{className:"col-10"},i.a.createElement(z,(o={type:"text",placeholder:"Enter Option",name:t+"_placeholder",style:{marginBottom:"5px"},value:a,onBlur:e.onUpdateOptions.bind(e,n),onChange:function(t){e.state.options[n]=t.target.value,e.forceUpdate()}},Object(N.a)(o,"style",{marginBottom:"10px"}),Object(N.a)(o,"id",t+"_placeholder"),o))))}),i.a.createElement("a",{href:"#",style:{display:"block",marginTop:"10px",paddingBottom:"20px"},onClick:this.addOption},"Add option"),i.a.createElement("div",{className:"clear"})))))))}}]),t}(n.Component),K=function(e){var t=e.name,a=e.placeholder,n=e.value,o=(e.label,e.size),s=e.error,l=e.info,r=(e.type,e.col,e.id),c=e.style,d=e.onChange,m=e.onBlur,p=e.disabled;return i.a.createElement("div",null,i.a.createElement("textarea",{id:r,className:D()("mceNoEditor form-control",{"is-invalid":s,"form-control-lg":"lg"===o,"form-control-sm":"sm"===o}),placeholder:a,name:t,value:n,onChange:d,onBlur:m,style:c,disabled:p,rows:"3"}),l&&i.a.createElement("small",{className:"form-text text-muted",dangerouslySetInnerHTML:{__html:l}}),s&&i.a.createElement("div",{className:"invalid-feedback"},s))};K.defaultProps={placeholder:"Short Text here",type:"text",size:"md",col:{xs:12}};var Q=K,V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:a.props.show,oldClassName:document.body.className},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onClick",value:function(e){this.props.onClick&&(this.props.modalButtonLoading(),document.body.classList.remove("modal-open"),this.props.onClick(e))}},{key:"onClose",value:function(e){this.props.modal.loading?e.preventDefault():(document.body.classList.remove("modal-open"),this.props.modalClose(),this.props.onClose())}},{key:"render",value:function(){if(!this.props.stateId)return null;if(this.props.children){document.body.classList.remove("modal-open");var e=document.body.className+" modal-open";return document.body.className=e,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"modal-backdrop fade show"}),i.a.createElement("div",{className:D()("modal fade show "+this.props.className),id:this.props.id,role:"dialog","aria-labelledby":this.props.id+"Title",style:{display:"block"},"aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-sm",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},this.props.title),i.a.createElement("button",{type:"button",className:"close",disabled:!!this.props.modal.loading,onClick:this.onClose.bind(this),"aria-label":"Close"},i.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),i.a.createElement("div",{className:"modal-body"},i.a.Children.only(this.props.children)),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{type:"button",disabled:!!this.props.modal.loading,className:"btn btn-secondary",onClick:this.onClose.bind(this)},this.props.cancelButton),i.a.createElement("button",{type:"button",disabled:!!this.props.modal.loading,className:"btn btn-primary",onClick:this.onClick.bind(this)},this.props.modal.loading?this.props.loadingButton:this.props.okButton))))))}return null}}]),t}(n.Component);V.defaultProps={id:"modalConfirmation",loadingButton:"Loading...",okButton:"Save Changes",cancelButton:"Close",className:"",stateId:""};var Y=Object(h.b)(function(e){return{modal:e.modal}},{modalClose:M,modalButtonFinish:U,modalButtonLoading:function(){return function(e){e({type:"Modal/BUTTON_LOADING"})}}})(V),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={title:"",desc:"",edit:null,delete:null,loading:!1,disabled:!1,modal:!1,success:!1,init:!1,section:null,editName:"",sectionId:null,sectionName:"",forms:[]},a.addCard=a.addCard.bind(Object(F.a)(Object(F.a)(a))),a.addSection=a.addSection.bind(Object(F.a)(Object(F.a)(a))),a.onChange=a.onChange.bind(Object(F.a)(Object(F.a)(a))),a.saveForm=a.saveForm.bind(Object(F.a)(Object(F.a)(a))),a.removeForm=a.removeForm.bind(Object(F.a)(Object(F.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id&&(this.setState({init:!0}),this.props.fetchForm(this.props.match.params.id).then(function(t){e.setState({title:t.title,desc:t.description,init:!1})}))}},{key:"onChange",value:function(e){this.setState(Object(N.a)({},e.target.name,e.target.value))}},{key:"editSection",value:function(e,t,a){this.setState({sectionName:e,editName:t})}},{key:"onKeypress",value:function(e,t,a){"Enter"==a.key&&(this.setState({sectionName:"",editName:"",section:{id:t,name:this.state.editName}}),_.dispatch({type:"CHANGE_SECTION",id:e,payload:{name:this.state.editName,id:t}}))}},{key:"saveForm",value:function(){var e=Object(R.a)(I.a.mark(function e(t){var a,n,i,o,s,l=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.forms,""!=this.state.title&&""!=this.state.desc){e.next=3;break}return e.abrupt("return");case 3:if(!C.a.isEmpty(a.create)){e.next=5;break}return e.abrupt("return");case 5:this.setState({disabled:!0,loading:!0,edit:null}),n=C.a.keyBy(a.create,"sectionId"),i=[],Object.entries(n).map(function(e,t){i.push({name:e[1].section.name,id:e[1].section.id})}),o={fields:a.create,sections:i},s={title:this.state.title,description:this.state.desc,data:o},this.props.saveForm(s,this.props.match.params.id).then(function(e){e&&setTimeout(function(){l.setState({success:!1})},3500),l.setState({success:!0,disabled:!1,loading:!1})}).catch(function(e){console.log(e)});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addCard",value:function(e){e.preventDefault(),this.newCard()}},{key:"addSection",value:function(){var e=Object(R.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.setState({sectionId:null});case 3:return e.next=5,this.newCard();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"newField",value:function(){var e=Object(R.a)(I.a.mark(function e(t,a,n){var i,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),i=B(),this.props.forms.create,(o={id:i,title:"",type:"text",placeholder:"",options:[],required:!1}).sectionId=t,o.section={id:t,name:a},_.dispatch({type:"CARD_NEW",payload:o,id:i}),this.setState({edit:i});case 8:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"newCard",value:function(){var e=B(),t=this.props.forms.create,a={id:e,title:"",type:"text",placeholder:"",options:[],required:!1};if(C.a.isEmpty(t)||C.a.isEmpty(this.state.sectionId)){var n="secId-"+Math.random().toString(30).substr(5,20);this.setState({sectionId:n,section:{id:n,name:"New section"}}),a.sectionId=n,a.section={id:n,name:"New section"}}else a.sectionId=this.state.section.id,a.section=this.state.section;_.dispatch({type:"CARD_NEW",payload:a,id:e}),this.setState({edit:e})}},{key:"removeCard",value:function(e,t){var a=this.props.forms.create;C.a.unset(a,e),console.log(a),_.dispatch({type:"CARD_REMOVING",payload:a,id:e}),this.setState({edit:null,sectionId:null,section:null,sectionName:""})}},{key:"editCard",value:function(e,t){this.state.edit==e?this.setState({edit:null}):this.setState({edit:e})}},{key:"toggleRequired",value:function(e,t){var a=!this.props.forms.create[e].required;_.dispatch({type:"CARD_REQUIRED",payload:e,required:a})}},{key:"modalOpen",value:function(e){this.setState({modal:!0})}},{key:"modalClose",value:function(e){this.setState({modal:!1})}},{key:"removeForm",value:function(e){var t=this;this.props.deleteForm(this.props.match.params.id).then(function(e){t.props.modalButtonFinish(),document.body.classList.remove("modal-open"),t.props.history.push("/")}).catch(function(e){alert("Something went wrong!"),t.setState({modal:!1})}).then(function(){t.props.modalButtonFinish()})}},{key:"render",value:function(){var e=this,t=this.props.forms,a=this.props.forms.deleting,n=[],o=C.a.keyBy(t.create,"sectionId");return console.log(t.create),Object.entries(o).map(function(o,s){n.push(i.a.createElement("div",{className:"section",key:o[1].sectionId},i.a.createElement("div",{className:"section-top"},i.a.createElement("div",{className:"section-panel",style:{textAlign:"left"},onBlur:e.onKeypress.bind(e,o[1].id,o[1].sectionId),onKeyDown:e.onKeypress.bind(e,o[1].id,o[1].sectionId),onClick:e.editSection.bind(e,o[0],o[1].section.name)},e.state.sectionName!==o[0]?o[1].section.name:"",e.state.sectionName==o[0]&&i.a.createElement(z,{className:"input-lg",type:"text",style:{fontSize:"20px",height:"34px",marginBottom:"0px"},disabled:e.state.loading,onChange:e.onChange,value:e.state.editName,name:"editName",id:"_section",placeholder:"Enter section name"})),i.a.createElement("button",{disabled:e.state.disabled||e.state.init,onClick:e.newField.bind(e,o[1].sectionId,o[1].section.name),type:"button",className:"btn btn-primary new-field"},i.a.createElement(q.a,{size:"1.5em"}))),i.a.createElement("div",{style:{display:"block",clear:"both"}}),Object.entries(C.a.filter(t.create,{sectionId:o[1].sectionId})).map(function(t,n){return i.a.createElement("div",{key:t[1].id,className:D()("panel card")},i.a.createElement("div",{className:D()("text-right footer-card",{"bg-white":e.state.edit!==t[1].id})},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"text-left col-7"},i.a.createElement("h4",null,""!=t[1].title?t[1].title:i.a.createElement("em",{style:{color:"#999"}},"No Question")),i.a.createElement("p",null,t[1].type.toUpperCase().replace("_"," "))),i.a.createElement("div",{className:"col-5"},i.a.createElement("button",{onClick:e.toggleRequired.bind(e,t[1].id),style:{marginRight:"10px"},type:"button",className:D()({"btn required":!0,"btn-default":!t[1].required,"btn-dark":t[1].required})},!t[1].required&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.d,{size:"1.5em",style:{float:"left"}})," ",i.a.createElement("span",{style:{float:"left",lineHeight:"25px"},className:""},"Required")),t[1].required&&i.a.createElement(i.a.Fragment,null,i.a.createElement(q.c,{size:"1.5em",style:{float:"left"}})," ",i.a.createElement("span",{style:{float:"left",lineHeight:"25px"},className:""}," Required"))),i.a.createElement("button",{onClick:e.removeCard.bind(e,t[1].id),type:"button",className:"btn btn-outline-danger delete_card",style:{marginRight:"10px"}},i.a.createElement(q.f,{size:"1.5em"})),i.a.createElement("button",{onClick:e.editCard.bind(e,t[1].id),type:"button",className:D()({"btn delete-card":!0,"btn-outline-secondary":e.state.edit!==t[1].id,"btn-success":e.state.edit==t[1].id})},i.a.createElement(q.e,{size:"1.5em"}))))),e.state.edit==t[1].id&&i.a.createElement("div",{className:"panel-body"},i.a.createElement(W,{id:t[1].id,data:t[1],delete:0!=a})," "))})))}),i.a.createElement("div",{className:"row justify-content-md-center text-center mb-5"},i.a.createElement("div",{className:"col-sm-8"},this.props.match.params.id&&i.a.createElement("h2",{className:"mt-4"},"Edit: ",this.state.title),!this.props.match.params.id&&i.a.createElement("h2",{className:"mt-4"},"Create A Form"),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},this.state.success&&i.a.createElement("div",{class:"alert alert-success text-left fade show",role:"alert"},i.a.createElement("strong",null,"Well done! all fields is successfully saved!")),i.a.createElement("div",{className:"form-group"},i.a.createElement(z,{className:"input-lg",type:"text",style:{fontSize:"20px"},onChange:this.onChange,disabled:this.state.loading,value:this.state.title,name:"title",id:"_new_title",placeholder:"Enter form title"}),i.a.createElement(Q,{className:"form-control input-lg",style:{fontSize:"15px",height:"auto"},onChange:this.onChange,value:this.state.desc,disabled:this.state.loading,name:"desc",id:"_new_desc",placeholder:"Enter form description"}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-4 text-left"},i.a.createElement(T.a,{to:"/",className:"btn btn-outline-secondary"},"\u2190 Back to List")),i.a.createElement("div",{className:"col-8"},i.a.createElement("div",{className:"text-right"},i.a.createElement("button",{type:"button",disabled:this.state.disabled||this.state.init&&C.a.isEmpty(t.create),style:{display:"inline-flex",flexDirection:"row"},className:"btn btn-success",onClick:this.saveForm},i.a.createElement(q.g,{size:"1.5em"})," ",1==this.state.loading?"Loading...":"Save All"),i.a.createElement("div",{className:"btn-group"},i.a.createElement("button",{disabled:this.state.disabled||this.state.init&&C.a.isEmpty(t.create),style:{marginLeft:"10px",display:"inline-flex",flexDirection:"row"},type:"button",className:"btn btn-primary",onClick:this.addSection},i.a.createElement(q.a,{size:"1.5em"})," New Section")))))))),!C.a.isEmpty(t.create)&&C.a.findKey(t.create,"sectionId")&&n.map(function(e){return e}),!C.a.isEmpty(t.create)&&void 0===C.a.findKey(t.create,"sectionId")&&i.a.createElement("div",{className:"card-body text-center"},i.a.createElement(q.h,{color:"red",size:"3em"})," ",i.a.createElement("br",null),i.a.createElement("h4",null,"You must update this form by removing the form and starts it again")),this.state.init&&C.a.isEmpty(t.create)&&i.a.createElement("div",{className:"panel"},i.a.createElement("div",{className:"card-body"},"Fetching fields...")),this.props.match.params.id&&!C.a.isEmpty(t.create)&&i.a.createElement("div",{className:"text-center"},i.a.createElement("button",{type:"button",disabled:this.state.disabled,onClick:this.modalOpen.bind(this),className:"btn mt-4 btn-outline-dark btn-lg"},i.a.createElement(q.f,{size:"1.5em"}),"  Delete Permanently")),this.state.modal&&i.a.createElement(Y,{okButton:"OK, Delete!",onClick:this.removeForm,onClose:this.modalClose.bind(this),stateId:"_remove_form",title:"Delete Form"},i.a.createElement("h4",null,"Are you sure to want to delete permanently ? "))))}}]),t}(n.Component),$=Object(h.b)(function(e){return{forms:e.forms}},{fetchForm:function(e){return function(t){return new Promise(function(){var a=Object(R.a)(I.a.mark(function a(n,i){var o;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P.table("forms").where({id:parseInt(e)}).first();case 2:(o=a.sent)||i(o),t({type:"FETCH_FORM",payload:o.data.fields}),n(o);case 6:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}},saveForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){return t&&(e.id=parseInt(t)),new Promise(function(n,i){t?P.table("forms").update(parseInt(t),e).then(function(){a({type:"UPDATE_FORM"}),n(!0)}).catch(function(e){i(e)}):(e.code=B(),P.table("forms").add(e).then(function(e){a({type:"SAVE_FORM"}),n(!0)}).catch(function(e){i(e)}))})}},deleteForm:function(e){return function(t){return new Promise(function(a,n){P.table("forms").where({id:parseInt(e)}).delete().then(function(e){t({type:"DELETE_FORM"}),a(!0)}).catch(function(e){n(e)})})}},modalClose:M,modalOpen:function(){return function(e){e({type:"Modal/SHOW"})}},modalButtonFinish:U})(J),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={title:"",desc:"",edit:null,delete:null,disabled:!1,loading:!1,base:"",forms:[]},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.fetchForms().then(function(t){e.setState({loading:!1,base:t.base_url})})}},{key:"onChange",value:function(e){this.setState(Object(N.a)({},e.target.name,e.target.value))}},{key:"gotoEdit",value:function(e,t){t.preventDefault(),this.props.history.push("/edit/"+e)}},{key:"render",value:function(){var e=this,t=this.props.forms;return i.a.createElement("div",{className:"row justify-content-md-center text-center"},i.a.createElement("div",{className:"col-sm-8"},i.a.createElement("h2",{className:"mt-4"},"Form Builder"),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"form-group",style:{marginBottom:"0px"}},i.a.createElement("div",{className:"text-left"},i.a.createElement("button",{type:"button",style:{display:"inline-flex",flexDirection:"row"},className:"btn btn-success",onClick:function(){e.props.clearForm(),e.props.history.push("/new")}},i.a.createElement(q.b,{size:"1.5em"})," Add New Form"))))),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table table-hover text-left"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Title"),i.a.createElement("th",null,"Code"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Action"))),!C.a.isEmpty(t.list)&&i.a.createElement("tbody",null,t.list.map(function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("td",null,i.a.createElement("strong",null," ",t.title)),i.a.createElement("td",null,i.a.createElement("code",null,t.code)),i.a.createElement("td",null,t.description.substr(0,25),t.description.length>25?"...":""),i.a.createElement("td",null,i.a.createElement("a",{className:"btn btn-outline-primary",onClick:e.gotoEdit.bind(e,t.id)},i.a.createElement(q.e,{size:"1.5em"}))))})),C.a.isEmpty(t.list)&&i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"4"},this.state.loading?"Fetching data...":"No data")))))))))}}]),t}(n.Component),Z=Object(h.b)(function(e){return{forms:e.forms}},{fetchForms:function(e){return function(e){return new Promise(function(t,a){P.table("forms").toArray().then(function(a){e({type:"FETCH_FORMS",payload:a}),t(a)}).catch(function(e){a(e)})})}},clearForm:function(){return function(e){e({type:"CLEAR_FORM"})}}})(X),ee=(a(85),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{store:_},i.a.createElement(p.a,{basename:"/form/"},i.a.createElement("div",{className:"App"},i.a.createElement(u.a,{exact:!0,path:"/",component:Z}),i.a.createElement(u.a,{exact:!0,path:"/new/",component:$}),i.a.createElement(u.a,{exact:!0,path:"/edit/:id",component:$}))))}}]),t}(n.Component)),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(i.a.createElement(ee,null),document.getElementById("app")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");te?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ae(t,e)})}}()}},[[48,1,2]]]);
//# sourceMappingURL=main.b55c977e.chunk.js.map